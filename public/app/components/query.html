<div class=' w3-card-2 w3-border' ng-show="$ctrl.shared.db.selectedQuery">
	<div class="w3-border-bottom w3-row-padding w3-padding-12 w3-theme-light w3-text-theme w3-small">
		<div class='w3-col w3-quarter'>
			<label class='w3-tiny'>Query name</label>
			<input class="w3-text-black" ng-model="$ctrl.shared.db.selectedQuery.name" type="text" style="width: 100%;height: 25px" ng-class="{'w3-disabled': $ctrl.shared.isProgress()}"
				ng-change="$ctrl.shared.db.modified = true">
		</div>
		<div class='w3-col w3-quarter'>
			<label class='w3-tiny'>Collection</label>
			<input class="w3-text-black" list="collections" ng-model="$ctrl.shared.db.selectedQuery.collection" style="width: 100%" ng-class="{'w3-disabled': $ctrl.shared.isProgress()}"
				ng-change="$ctrl.shared.db.modified = true">
			<datalist id="collections">
				<option ng-repeat="c in $ctrl.shared.db.inventory.collections | orderBy: c.name" value="{{c.name}}">
			</datalist>
		</div>
		<div class='w3-col w3-quarter'>
			<label class='w3-tiny'>Operation</label>
			<select class="w3-select w3-white" ng-model="$ctrl.shared.db.selectedQuery.operation" style="width: 100%; height:25px" ng-class="{'w3-disabled': $ctrl.shared.isProgress()}"
				ng-change="$ctrl.shared.db.modified = true">
                <option value='aggr'>Aggregate</option>
                <option value='find'>Find</option>
            </select>
		</div>
		<div class='w3-col w3-quarter'>
			<label class='w3-tiny'>Dashboards</label>
			<input class="w3-text-black" ng-model="$ctrl.shared.db.selectedQuery.dashboards" ng-class="{'w3-disabled': $ctrl.shared.isProgress()}"
				placeholder='comma separated list' type="text" style="width: 100%" ng-change="$ctrl.shared.db.modified = true">

		</div>
	</div>
	<div ng-class="{'w3-disabled': $ctrl.shared.isProgress()}" style="min-height:300px" id="aceEditor" ui-ace="{mode:'json'}"
		ng-model="$ctrl.shared.db.selectedQuery.code" ng-change="$ctrl.shared.db.modified = true"></div>
	<script>
        var aceEditor = ace.edit("aceEditor");
        aceEditor.setHighlightActiveLine(false);
        aceEditor.$blockScrolling = Infinity;
    </script>
    <div class='w3-container w3-tiny w3-theme-light '>
        <span class='w3-text-red'>{{$ctrl.error}}</span>
    </div>
	<div class="w3-border-bottom w3-row-padding w3-padding-12 w3-theme-light w3-text-theme w3-small">
		<div class='w3-col w3-quarter'>
			&nbsp;
		</div>
		<div class='w3-col w3-quarter'>
			<label class='w3-tiny'>Delivery</label>
			<select class="w3-select w3-white" ng-model="$ctrl.shared.run.delivery" style="width: 100%; height:25px">
                <option value='page'>This Page</option>
                <option value='file'>File</option>
            </select>
		</div>
		<div class='w3-col w3-quarter'>
			<label class='w3-tiny'>Format</label>
			<select class="w3-select w3-white" ng-model="$ctrl.shared.run.format" style="width: 100%; height:25px">
                <option value='html'>HTML</option>
                <option value='json'>JSON</option>
                <option value='csv'>CSV</option>
            </select>
		</div>
		<div class='w3-col w3-quarter w3-padding-12 '>
			<a class="w3-btn w3-theme" style="width: 100%" ng-class="{'w3-disabled': $ctrl.shared.isProgress()}" ng-click="$ctrl.run()">
                Run
                <span ng-show="$ctrl.shared.runProgress">
                    <i class="fa fa-refresh fa-spin"></i>
                </span>
            </a>	
		</div>
	</div>
</div>
<br>

		
